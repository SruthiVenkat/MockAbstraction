<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SchedulerMetaData.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">quartz-core</a> &gt; <a href="index.source.html" class="el_package">org.quartz</a> &gt; <span class="el_source">SchedulerMetaData.java</span></div><h1>SchedulerMetaData.java</h1><pre class="source lang-java linenums">
/* 
 * All content copyright Terracotta, Inc., unless otherwise indicated. All rights reserved.
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not 
 * use this file except in compliance with the License. You may obtain a copy 
 * of the License at 
 * 
 *   http://www.apache.org/licenses/LICENSE-2.0 
 *   
 * Unless required by applicable law or agreed to in writing, software 
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT 
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the 
 * License for the specific language governing permissions and limitations 
 * under the License.
 * 
 */

package org.quartz;

import java.util.Date;

/**
 * Describes the settings and capabilities of a given &lt;code&gt;{@link Scheduler}&lt;/code&gt;
 * instance.
 * 
 * @author James House
 */
public class SchedulerMetaData implements java.io.Serializable {
  
    private static final long serialVersionUID = 4203690002633917647L;

    /*
     * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
     * 
     * Data members.
     * 
     * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
     */

    private String schedName;

    private String schedInst;

    private Class&lt;?&gt; schedClass;

    private boolean isRemote;

    private boolean started;

    private boolean isInStandbyMode;

    private boolean shutdown;

    private Date startTime;

    private int numJobsExec;

    private Class&lt;?&gt; jsClass;

    private boolean jsPersistent;

    private boolean jsClustered;

    private Class&lt;?&gt; tpClass;

    private int tpSize;

    private String version;

    /*
     * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
     * 
     * Constructors.
     * 
     * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
     */

    public SchedulerMetaData(String schedName, String schedInst,
            Class&lt;?&gt; schedClass, boolean isRemote, boolean started,
            boolean isInStandbyMode, boolean shutdown, Date startTime, int numJobsExec,
            Class&lt;?&gt; jsClass, boolean jsPersistent, boolean jsClustered, Class&lt;?&gt; tpClass, int tpSize,
<span class="fc" id="L83">            String version) {</span>
<span class="fc" id="L84">        this.schedName = schedName;</span>
<span class="fc" id="L85">        this.schedInst = schedInst;</span>
<span class="fc" id="L86">        this.schedClass = schedClass;</span>
<span class="fc" id="L87">        this.isRemote = isRemote;</span>
<span class="fc" id="L88">        this.started = started;</span>
<span class="fc" id="L89">        this.isInStandbyMode = isInStandbyMode;</span>
<span class="fc" id="L90">        this.shutdown = shutdown;</span>
<span class="fc" id="L91">        this.startTime = startTime;</span>
<span class="fc" id="L92">        this.numJobsExec = numJobsExec;</span>
<span class="fc" id="L93">        this.jsClass = jsClass;</span>
<span class="fc" id="L94">        this.jsPersistent = jsPersistent;</span>
<span class="fc" id="L95">        this.jsClustered = jsClustered;</span>
<span class="fc" id="L96">        this.tpClass = tpClass;</span>
<span class="fc" id="L97">        this.tpSize = tpSize;</span>
<span class="fc" id="L98">        this.version = version;</span>
<span class="fc" id="L99">    }</span>

    /*
     * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
     * 
     * Interface.
     * 
     * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
     */

    /**
     * &lt;p&gt;
     * Returns the name of the &lt;code&gt;Scheduler&lt;/code&gt;.
     * &lt;/p&gt;
     */
    public String getSchedulerName() {
<span class="fc" id="L115">        return schedName;</span>
    }

    /**
     * &lt;p&gt;
     * Returns the instance Id of the &lt;code&gt;Scheduler&lt;/code&gt;.
     * &lt;/p&gt;
     */
    public String getSchedulerInstanceId() {
<span class="fc" id="L124">        return schedInst;</span>
    }

    /**
     * &lt;p&gt;
     * Returns the class-name of the &lt;code&gt;Scheduler&lt;/code&gt; instance.
     * &lt;/p&gt;
     */
    public Class&lt;?&gt; getSchedulerClass() {
<span class="fc" id="L133">        return schedClass;</span>
    }

    /**
     * &lt;p&gt;
     * Returns the &lt;code&gt;Date&lt;/code&gt; at which the Scheduler started running.
     * &lt;/p&gt;
     * 
     * @return null if the scheduler has not been started.
     */
    public Date getRunningSince() {
<span class="fc" id="L144">        return startTime;</span>
    }
    
    /**
     * &lt;p&gt;
     * Returns the number of jobs executed since the &lt;code&gt;Scheduler&lt;/code&gt;
     * started..
     * &lt;/p&gt;
     */
    public int getNumberOfJobsExecuted() {
<span class="fc" id="L154">        return numJobsExec;</span>
    }

    /**
     * &lt;p&gt;
     * Returns whether the &lt;code&gt;Scheduler&lt;/code&gt; is being used remotely (via
     * RMI).
     * &lt;/p&gt;
     */
    public boolean isSchedulerRemote() {
<span class="fc" id="L164">        return isRemote;</span>
    }

    /**
     * &lt;p&gt;
     * Returns whether the scheduler has been started.
     * &lt;/p&gt;
     * 
     * &lt;p&gt;
     * Note: &lt;code&gt;isStarted()&lt;/code&gt; may return &lt;code&gt;true&lt;/code&gt; even if
     * &lt;code&gt;isInStandbyMode()&lt;/code&gt; returns &lt;code&gt;true&lt;/code&gt;.
     * &lt;/p&gt;
     */
    public boolean isStarted() {
<span class="fc" id="L178">        return started;</span>
    }

    /**
     * Reports whether the &lt;code&gt;Scheduler&lt;/code&gt; is in standby mode.
     */
    public boolean isInStandbyMode() {
<span class="fc" id="L185">        return isInStandbyMode;</span>
    }

    /**
     * &lt;p&gt;
     * Reports whether the &lt;code&gt;Scheduler&lt;/code&gt; has been shutdown.
     * &lt;/p&gt;
     */
    public boolean isShutdown() {
<span class="fc" id="L194">        return shutdown;</span>
    }

    /**
     * &lt;p&gt;
     * Returns the class-name of the &lt;code&gt;JobStore&lt;/code&gt; instance that is
     * being used by the &lt;code&gt;Scheduler&lt;/code&gt;.
     * &lt;/p&gt;
     */
    public Class&lt;?&gt; getJobStoreClass() {
<span class="fc" id="L204">        return jsClass;</span>
    }
    
    /**
     * &lt;p&gt;
     * Returns whether or not the &lt;code&gt;Scheduler&lt;/code&gt;'s&lt;code&gt;JobStore&lt;/code&gt;
     * instance supports persistence.
     * &lt;/p&gt;
     */
    public boolean isJobStoreSupportsPersistence() {
<span class="fc" id="L214">        return jsPersistent;</span>
    }

    /**
     * &lt;p&gt;
     * Returns whether or not the &lt;code&gt;Scheduler&lt;/code&gt;'s&lt;code&gt;JobStore&lt;/code&gt;
     * is clustered.
     * &lt;/p&gt;
     */
    public boolean isJobStoreClustered() {
<span class="fc" id="L224">        return jsClustered;</span>
    }

    /**
     * &lt;p&gt;
     * Returns the class-name of the &lt;code&gt;ThreadPool&lt;/code&gt; instance that is
     * being used by the &lt;code&gt;Scheduler&lt;/code&gt;.
     * &lt;/p&gt;
     */
    public Class&lt;?&gt; getThreadPoolClass() {
<span class="fc" id="L234">        return tpClass;</span>
    }

    /**
     * &lt;p&gt;
     * Returns the number of threads currently in the &lt;code&gt;Scheduler&lt;/code&gt;'s
     * &lt;code&gt;ThreadPool&lt;/code&gt;.
     * &lt;/p&gt;
     */
    public int getThreadPoolSize() {
<span class="fc" id="L244">        return tpSize;</span>
    }

    /**
     * &lt;p&gt;
     * Returns the version of Quartz that is running.
     * &lt;/p&gt;
     */
    public String getVersion() {
<span class="fc" id="L253">        return version;</span>
    }

    /**
     * &lt;p&gt;
     * Return a simple string representation of this object.
     * &lt;/p&gt;
     */
    @Override
    public String toString() {
        try {
<span class="fc" id="L264">            return getSummary();</span>
<span class="nc" id="L265">        } catch (SchedulerException se) {</span>
<span class="nc" id="L266">            return &quot;SchedulerMetaData: undeterminable.&quot;;</span>
        }
    }

    /**
     * &lt;p&gt;
     * Returns a formatted (human readable) String describing all the &lt;code&gt;Scheduler&lt;/code&gt;'s
     * meta-data values.
     * &lt;/p&gt;
     * 
     * &lt;p&gt;
     * The format of the String looks something like this:
     * 
     * &lt;pre&gt;
     * 
     * 
     *  Quartz Scheduler 'SchedulerName' with instanceId 'SchedulerInstanceId' Scheduler class: 'org.quartz.impl.StdScheduler' - running locally. Running since: '11:33am on Jul 19, 2002' Not currently paused. Number of Triggers fired: '123' Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with '8' threads Using job-store 'org.quartz.impl.JDBCJobStore' - which supports persistence.
     * &lt;/pre&gt;
     * 
     * &lt;/p&gt;
     */
    public String getSummary() throws SchedulerException {
<span class="fc" id="L288">        StringBuilder str = new StringBuilder(&quot;Quartz Scheduler (v&quot;);</span>
<span class="fc" id="L289">        str.append(getVersion());</span>
<span class="fc" id="L290">        str.append(&quot;) '&quot;);</span>

<span class="fc" id="L292">        str.append(getSchedulerName());</span>
<span class="fc" id="L293">        str.append(&quot;' with instanceId '&quot;);</span>
<span class="fc" id="L294">        str.append(getSchedulerInstanceId());</span>
<span class="fc" id="L295">        str.append(&quot;'\n&quot;);</span>

<span class="fc" id="L297">        str.append(&quot;  Scheduler class: '&quot;);</span>
<span class="fc" id="L298">        str.append(getSchedulerClass().getName());</span>
<span class="fc" id="L299">        str.append(&quot;'&quot;);</span>
<span class="pc bpc" id="L300" title="1 of 2 branches missed.">        if (isSchedulerRemote()) {</span>
<span class="nc" id="L301">            str.append(&quot; - access via RMI.&quot;);</span>
        } else {
<span class="fc" id="L303">            str.append(&quot; - running locally.&quot;);</span>
        }
<span class="fc" id="L305">        str.append(&quot;\n&quot;);</span>

<span class="pc bpc" id="L307" title="1 of 2 branches missed.">        if (!isShutdown()) {</span>
<span class="pc bpc" id="L308" title="1 of 2 branches missed.">            if (getRunningSince() != null) {</span>
<span class="nc" id="L309">                str.append(&quot;  Running since: &quot;);</span>
<span class="nc" id="L310">                str.append(getRunningSince());</span>
            } else {
<span class="fc" id="L312">                str.append(&quot;  NOT STARTED.&quot;);</span>
            }
<span class="fc" id="L314">            str.append(&quot;\n&quot;);</span>

<span class="pc bpc" id="L316" title="1 of 2 branches missed.">            if (isInStandbyMode()) {</span>
<span class="fc" id="L317">                str.append(&quot;  Currently in standby mode.&quot;);</span>
            } else {
<span class="nc" id="L319">                str.append(&quot;  Not currently in standby mode.&quot;);</span>
            }
        } else {
<span class="nc" id="L322">            str.append(&quot;  Scheduler has been SHUTDOWN.&quot;);</span>
        }
<span class="fc" id="L324">        str.append(&quot;\n&quot;);</span>

<span class="fc" id="L326">        str.append(&quot;  Number of jobs executed: &quot;);</span>
<span class="fc" id="L327">        str.append(getNumberOfJobsExecuted());</span>
<span class="fc" id="L328">        str.append(&quot;\n&quot;);</span>

<span class="fc" id="L330">        str.append(&quot;  Using thread pool '&quot;);</span>
<span class="fc" id="L331">        str.append(getThreadPoolClass().getName());</span>
<span class="fc" id="L332">        str.append(&quot;' - with &quot;);</span>
<span class="fc" id="L333">        str.append(getThreadPoolSize());</span>
<span class="fc" id="L334">        str.append(&quot; threads.&quot;);</span>
<span class="fc" id="L335">        str.append(&quot;\n&quot;);</span>

<span class="fc" id="L337">        str.append(&quot;  Using job-store '&quot;);</span>
<span class="fc" id="L338">        str.append(getJobStoreClass().getName());</span>
<span class="fc" id="L339">        str.append(&quot;' - which &quot;);</span>
<span class="fc bfc" id="L340" title="All 2 branches covered.">        if (isJobStoreSupportsPersistence()) {</span>
<span class="fc" id="L341">            str.append(&quot;supports persistence.&quot;);</span>
        } else {
<span class="fc" id="L343">            str.append(&quot;does not support persistence.&quot;);</span>
        }
<span class="fc bfc" id="L345" title="All 2 branches covered.">        if (isJobStoreClustered()) {</span>
<span class="fc" id="L346">            str.append(&quot; and is clustered.&quot;);</span>
        } else {
<span class="fc" id="L348">            str.append(&quot; and is not clustered.&quot;);</span>
        }
<span class="fc" id="L350">        str.append(&quot;\n&quot;);</span>

<span class="fc" id="L352">        return str.toString();</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>